# 第七章 递推关系和生成函数

## EX1

> Let $f_0, f_1, f_2, ..., f_n, ...$, denote the Fibonacci sequence. By evaluating each of the following expressions for small values of n, conjecture a general formula and then prove it, using mathematical induction and the Fibonacci recurrence:
>
> (a) $f_1 + f_3 + \cdots + f_{2n-1}$
>
> (b) $f_0 + f_2 + \cdots + f_{2n}$
>
> (c) $f_0 - f_1 + f_2 - \cdots + (-1)^n f_n$
>
> (d)$f_0^2 + f_1^2 + \cdots + f_n^2$

### EX1(a)

先打表找规律，

```cpp
#include <iostream>
#include <vector>

using namespace std;

int main()
{
    int p = 0, q = 1;
    vector<int> fibList {p, q};
    for(int i = 0; i < 50; ++ i) {
        fibList.emplace_back(p+q);
        p = q;
        q = fibList.back();
    }
    
    int odd_total = 0, even_total = 0, alter_total = 0, square_total;
    int flag = 1;
    printf("idx \t sum_odd \t sum_total \t sum_alter \t sum_square \n");
    for(int i = 0; i < 10; ++ i) {
        odd_total += fibList[max(2*i-1, 0)];
        even_total += fibList[2*i];
        alter_total += flag * fibList[i];
        flag *= -1;
        square_total += fibList[i] * fibList[i];
        printf("%d \t %d \t %d \t %d \t %d\n", i, odd_total, even_total,
                alter_total, square_total);
    }
    return 0;
}
```

可以发现：$f_1 + f_3 + \cdots + f_{2n-1} = f_{2n}$，$f_0 + f_2 + \cdots + f_{2n} = f_{2n-1}-1$，$f_0 - f_1 + f_2 - \cdots + (-1)^n f_n = -1 + (-1)^n f_{n-1}$，$f_0^2 + f_1^2 + \cdots + f_n^2 = f_n f_{n+1}$。

数学归纳证明过程略。

### EX1(d)

这个强调一下特殊的构造方法，辅助猜测递推公式。

$$
\begin{aligned}
    \sum_{i = 0}^{n} f_i &= f_0^2 + \sum_{i=1}^n f_i^2 \\
    &= f_0 f_1 + \sum_{i=1}^n f_i (f_{i+1} - f_{i-1}) \\
    &= f_0 f_1 + (f_1f_2 - f_1f_0) + (f_2 f_3 - f_2 f_1) + \cdots + (f_nf_{n+1} - f_n f_{n-1}) \\
    &= f_n f_{n+1}
\end{aligned}
$$

## EX2

> Prove that the nth Fibonacci number In is the integer that is closest to the number
> $$
> \frac{1}{\sqrt{5}} {\left( \frac{1+\sqrt{5}}{2} \right)^n}
> $$

## EX3

> Prove the following about the Fibonacci numbers:
>
> (a) $f_n$ is even if and only if n is divisible by 3.
>
> (b) $f_n$ is divisible by 3 if and only if n is divisible by 4.
>
> (c) $f_n$ is divisible by 4 if and only if n is divisible by 6.

